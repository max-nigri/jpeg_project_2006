<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0028)http://photo.net/learn/jpeg/ -->
<HTML><HEAD><TITLE>Photo.net - Jpeg Compression by Gordon Richardson</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1"><LINK 
media=all 
href="Photo_net - Jpeg Compression by Gordon Richardson_files/header.css" 
type=text/css rel=stylesheet><!-- /learn/jpeg/index.html --><LINK 
href="Photo_net - Jpeg Compression by Gordon Richardson_files/articles.css" 
type=text/css rel=stylesheet><!-- BEGIN: AdSolution-Tag 4.3: Global-Code [PLACE IN HTML-HEAD-AREA!] -->
<SCRIPT language=javascript 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/aslmain.js" 
type=text/javascript></SCRIPT>
<!-- END: AdSolution-Tag 4.3: Global-Code -->
<META content="MSHTML 6.00.2900.3020" name=GENERATOR></HEAD>
<BODY class=fixedwidth><!-- Start of photo.net header-->
<SCRIPT language=javascript 
type=text/javascript>var subscriber_p=0, user_id=0;</SCRIPT>

<DIV id=leaderboard>
<CENTER>
<SCRIPT language=javascript type=text/javascript>Ads_kid=0;Ads_bid=0;Ads_xl=0;Ads_yl=0;Ads_xp='';Ads_yp='';Ads_opt=0;Ads_wrd='[KeyWord]';Ads_par='';Ads_cnturl='';</SCRIPT>

<SCRIPT language=javascript 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/ros_exp_leader_728x90_468x60.js" 
type=text/javascript></SCRIPT>
<IMG height=1 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/learn.gif" width=1 
border=0><IMG height=1 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/counter.gif" 
width=1 border=0></CENTER></DIV>
<DIV id=header>
<H1 id=logo><A href="http://photo.net/">photo.net</A></H1>
<UL id=tabs>
  <LI class=tab><A class=tab title="Learn about photography" 
  href="http://photo.net/learn/">Learning</A>
  <UL>
    <LI><A href="http://photo.net/learn/making-photographs/">Tutorial</A>
    <LI><A href="http://photo.net/tv/">Videos</A>
    <LI><A href="http://photo.net/learn/editing">Digital Editing</A>
    <LI><A href="http://photo.net/learn/books">Books</A>
    <LI><A href="http://photo.net/learn/portraits">Portraits</A>
    <LI><A href="http://photo.net/learn/architectural/gardens">Gardens</A>
    <LI><A href="http://photo.net/learn/architectural/exterior">Architecture</A>
    <LI><A href="http://photo.net/learn/architectural/interior">Interiors</A>
    <LI><A href="http://photo.net/learn/macro">Macro</A>
    <LI><A href="http://photo.net/learn/studio/primer">Studio</A>
    <LI><A href="http://photo.net/learn/nudes">Nudes</A>
    <LI><A href="http://photo.net/learn/underwater/primer">Underwater</A>
    <LI><A href="http://photo.net/learn/sports/overview">Sports and Action</A>
    <LI><A href="http://photo.net/learn/concerts/mirarchi/concer_i">Concerts</A>
    <LI><A href="http://photo.net/learn/astro/intro">Astrophotography</A>
    <LI><A href="http://photo.net/learn/astro/star-streak">Star Trails</A>
    <LI><A href="http://photo.net/learn/optics/edscott/spectsel">Infrared and 
    UV</A>
    <LI><A href="http://photo.net/learn/pinhole/pinhole">Pinhole</A>
    <LI><A href="http://photo.net/learn/street/intro">Street</A>
    <LI><A href="http://photo.net/learn/nature/">Nature</A>
    <LI><A href="http://photo.net/learn/architectural/ruins/">Ruins</A>
    <LI><A href="http://photo.net/learn/darkroom/">Darkroom</A>
    <LI><A href="http://photo.net/learn/framing/">Framing</A>
    <LI><A href="http://photo.net/travel/">Travel</A></LI></UL></LI>
  <LI class=tab><A class=tab 
  title="Upload photos for viewing, critique, and rating by others" 
  href="http://photo.net/gallery/">Sharing</A>
  <UL>
    <LI><A href="http://photo.net/photodb">My Portfolio</A>
    <LI><A href="http://photo.net/gallery">Gallery Main Page</A>
    <LI><A href="http://photo.net/gallery/photocritique/filter">Top Photos</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1481">Critique Forum</A>
    <LI><A 
    href="http://photo.net/gallery/photocritique?rating_type=photocritique&amp;topic_id=1481&amp;recent=4">Rate 
    Photos</A></LI></UL></LI>
  <LI class=tab><A class=tab 
  title="Participate in an active photography Community" 
  href="http://photo.net/gallery/caption-search/">Exploring</A>
  <UL>
    <LI><A href="http://photo.net/photodb/photo-of-the-week/">Photograph of the 
    week</A>
    <LI><A href="http://photo.net/gallery/photocritique/filter">Top Photos</A>
    <LI><A href="http://photo.net/gallery/caption-search/">Search/browse 
    photos</A>
    <LI><A href="http://photo.net/community/directory">Member Directory</A>
    <LI><A href="http://photo.net/shared/whos-online">Who's 
  online?</A></LI></UL></LI>
  <LI class=tab><A class=tab title="Find the right equipment" 
  href="http://photo.net/equipment/">Gearing up</A>
  <UL>
    <LI><A href="http://photo.net/gc/domain-multi">Classifieds</A>
    <LI><A href="http://photo.net/ezshop/category">Equipment Reviews</A>
    <LI><A href="http://photo.net/equipment/digital/">Digital</A>
    <LI><A href="http://photo.net/equipment/35mm/">35mm</A>
    <LI><A href="http://photo.net/equipment/medium-format/">Medium Format</A>
    <LI><A href="http://photo.net/equipment/large-format/">Large Format</A>
    <LI><A href="http://photo.net/equipment/canon/">Canon</A>
    <LI><A href="http://photo.net/equipment/leica/">Leica</A>
    <LI><A href="http://photo.net/equipment/nikon/">Nikon</A>
    <LI><A href="http://photo.net/equipment/minolta/">Minolta</A>
    <LI><A href="http://photo.net/equipment/pentax/">Pentax</A></LI></UL></LI>
  <LI class=tab><A class=tab title="Discuss photography" 
  href="http://photo.net/community/forums">Forums</A>
  <UL>
    <LI><A href="http://photo.net/bboard/unified/">Unified View</A>
    <LI><A href="http://photo.net/community/forums">All Forums</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1541">B&amp;W - Film</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1542">B&amp;W - 
    Printing</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1545">Canon EOS</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1903">Classic 
Cameras</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1841">Digital 
Cameras</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1701">Digital 
    Darkroom</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1544">Everything 
Else</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1822">Film &amp; 
    Processing</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1547">Large Format</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1548">Leica</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1824">Lighting</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=35">Medium Format</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=34">Nature</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1681">Nikon</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1801">No Words</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1902">Olympus</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1901">Pentax</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=1941">Philosophy</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=2061">Street &amp; 
    Doc</A>
    <LI><A href="http://photo.net/bboard/forum?topic_id=2021">Wedding &amp; 
    Social</A></LI></UL></LI></UL>
<DIV id=hdroptions><A 
href="http://photo.net/register/index?new_user_p=0&amp;my_workspace_p=1&amp;x=1166519804">Sign 
In/Register</A><SPAN id=hdr_options_sep>&nbsp;•&nbsp;</SPAN> <A 
title="Search on photo.net, using Google" 
href="http://photo.net/search">Search</A> </DIV></DIV><!-- End of photo.net header-->
<DIV class=content>
<DIV id=skyad-right style="PADDING-LEFT: 10px; FLOAT: right; PADDING-TOP: 20px">
<SCRIPT language=javascript type=text/javascript>Ads_kid=0;Ads_bid=0;Ads_xl=0;Ads_yl=0;Ads_xp='';Ads_yp='';Ads_opt=0;Ads_wrd='[KeyWord]';Ads_par='';Ads_cnturl='';</SCRIPT>

<SCRIPT language=javascript 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/ros_exp_sky_160x600_120x600.js" 
type=text/javascript></SCRIPT>
<IMG height=1 
src="Z:\huji_course\jpeg_project\ref_html's\Photo_net - Jpeg Compression by Gordon Richardson_files\learn(1).gif" 
width=1 border=0></DIV><!-- start of original body -->
<H1>Jpeg Compression Introduction</H1>
<DIV class=byline>
<P>by <A href="http://www.capetownskies.com/">Gordon Richardson</A> Copyright 
2003</P></DIV>
<DIV class=endtop><A name=top></A><IMG class=illustration height=134 hspace=20 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/00_cableway_lionshdt.jpg" 
width=200> 
<UL>
  <LI><B><A href="http://photo.net/learn/jpeg/#intro">Introduction</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#sourc">Sources and 
  Articles</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#hist">History of Jpeg</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#percep">Visual 
  Perception</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#encdec">Compression and 
  De-Compression</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#qual">Jpeg Quality 
  Settings</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#chrom">Chroma 
  sub-sampling</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#digicam">Digital 
  Cameras</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#errors">Jpeg Errors</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#ijg">Independent Jpeg 
  Group</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#jpegdmp">Jpegdump</A></B><BR>
  <LI><B><A href="http://photo.net/learn/jpeg/#gloss">Glossary</A></B> </LI></UL>
<P align=right><B>Lion's Head from Table Mountain, Cape Town</B><BR>200X134 
pixels 80400 bytes (3,672 byte Jpeg)</P>
<H2><A name=intro>Introduction</A></H2>
<P>This article gives a brief introduction to the Jpeg (pronounced jay-peg) 
<I>lossy compression image</I> storage and transmission format, and describes 
some important aspects of its use. You do not need to understand all these 
issues to use Jpeg, but some knowledge may help you create better images.</P>
<P>The default <A href="http://photo.net/learn/jpeg/#qual">quality setting</A> 
on most <A href="http://photo.net/learn/jpeg/#ijg">IJG</A> packages (including 
ImageMagick used on photo.net) is 75, which gives a good tradeoff between 
<I>file size</I> and <A href="http://photo.net/learn/jpeg/#percep">perceived</A> 
quality. The default <A href="http://photo.net/learn/jpeg/#chrom">chroma</A> 
sub-sampling of 2:1 works well for the majority of images (photo.net uses 1:1). 
There are known <A href="http://photo.net/learn/jpeg/#errors">errors</A> and 
tradeoffs in the <A href="http://photo.net/learn/jpeg/#encdec">compression 
process</A>.</P>
<P>Several previous attempts have tried to compare the Jpeg's produced by 
Photoshop against those produced by IJG, but these are unsuccessful for various 
reasons. First the <A href="http://photo.net/learn/jpeg/#encdec">quantisation 
tables</A> used by each package are not the same, and each has different 
emphasis on visual perception. In addition the <A 
href="http://photo.net/learn/jpeg/#chrom">chroma sub-sampling</A> used by 
Photoshop changes from 1:1 to 2:1 half-way across the quality scale, without 
direct control by the user.</P>
<P>The use of the <A href="http://photo.net/learn/jpeg/#jpegdmp">Jpegdump</A> 
<I>utility</I> allows for examination of the output of images from many 
different sources, without needing to own the package that produced them.</P>
<P>Few of the available <A href="http://photo.net/learn/jpeg/#sourc">sources and 
articles</A> seem to answer all the questions that come up often in <A 
href="http://www.photo.net/community/forums">Q&amp;A Forums</A>, hence this 
attempt to clarify as much as possible. I am not an expert, nor did I take part 
in the <A href="http://photo.net/learn/jpeg/#hist">development of Jpeg</A>, so 
my discussion and conclusions are empirical and subjective. Comments and 
feedback are welcome.</P>
<H2><A name=sourc>Sources and Articles</A></H2>
<P>The most common questions are covered in the <A 
href="http://www.faqs.org/faqs/jpeg-faq/part1/preamble.html">Jpeg FAQ</A>. Jpeg 
images were first mentioned on this site in <A 
href="http://philip.greenspun.com/panda/images">Adding Images to Your Site</A> 
by Philip Greenspun in his 1998 book. There are also written sources (I have no 
references for these).</P>
<P>There are multiple overlapping threads in the photo.net archives, such 
as:<BR><A href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=0009CX">A 
JPEG question</A> in 1998 and <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=000bKu">Why are 
Phil's JPEGs smaller than mine?</A> in 1999. Even more <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=000jrw">Ideal 
compression rate for JPEG Format</A> and <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=000yFB">Printing JPEG 
- bad juju</A> and <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=000kWy">Jpeg 
compression comparisons</A> in 2000.</P>
<P>In 2002 a new problem nearly crippled photo.net for several months <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=003j8d">Browser 
Problems Caused by Photoshop 7 JPEG images</A> resulting in several 
controversial changes (see <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=004QXs">What's 
happening to our uploaded images?</A>). Still more questions came in 2003: <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=0040pp">JPEG 
compression loss</A> and <A 
href="http://www.photo.net/bboard/q-and-a-fetch-msg?msg_id=004qLc">uploaded file 
size</A>.</P>
<P>More discussions can be found in the rec.photo.digital newsgroup, or by 
searching <A href="http://groups.google.com/">Google Groups</A> (Usenet). My own 
learning curve has spanned this same time-frame, but it seems the sources of 
information are not clear enough to avoid repeated questions.</P>
<H2><A name=hist>History of Jpeg</A></H2>
<P>The aim of Jpeg compression is to take <I>full-color</I> (and gray-scale) 
"real-world" scenes and reduce the <I>file size</I> of <I>images</I> for storage 
and transmission. While capacity and bandwidth have improved dramatically over 
the last decade, the increased size of images make Jpeg still relevant for 
digital cameras users and websites.</P>
<P>The <A href="http://www.jpeg.org/">Jpeg organisation</A> is an umbrella body 
that coordinates formats for encoding and compression of images. What is 
commonly known as Jpeg is the JFIF (Jpeg File Interchange Format) implementation 
(described by Eric Hamilton in 1992). This makes up the vast majority of images 
viewed today by browsers on the world-wide-web.</P>
<P>This standard doesn't define exactly how to implement this process, but is 
sufficiently wide that images from any program can be viewed. The most common 
version in use is that produced by the <A 
href="http://photo.net/learn/jpeg/#ijg">Independent Jpeg Group</A> or IJG (see 
below). Other implementations are the Pegasus Jpeg Library, and the version used 
in Photoshop. These differ only on the encoding side of the process.</P>
<H2><A name=percep>Visual Perception</A></H2>
<P><IMG height=258 hspace=20 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/gray_gradient_gamma_converted.gif" 
width=175 align=left> <IMG height=258 hspace=20 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/gray_12.jpg" 
width=175 align=right> Human visual perception comprises the eye and retina, 
plus the processing done in the cortex of the brain. There are many shortcuts 
and tricks used to create the feeling of accurate perception, but "optical 
illusions" dispel this myth. The human eye is more sensitive to moving object 
and edges rather than gradual transitions, and to red and green rather than than 
blue light. It is also more sensitive to changes in brightness than colour.</P>
<P>In the diagram on the left various grey-scales A to E represent gradual 
changes in brightness. These appear smooth and continuous to the eye, although 
each is made up of less than 256 steps (B and D are not as smooth as C). This 
can be seen after several Jpeg compressions are applied to create the right hand 
image.<BR clear=all></P>
<P>This perceptual bias is exploited in Jpeg (see below). Similar perceptual 
biases are taken advantage of in television images, and MP3 audio coding.</P>
<H2><A name=encdec>Compression (Encoding and Decoding)</A></H2>
<P>Conventional methods of <I>lossless compression</I> such as <I>Zip</I> 
reversibly reduce <I>file sizes</I> while preserving information by compacting 
regularities in the data. Jpeg compression goes one step further, by organising 
regularities in the <A href="http://photo.net/learn/jpeg/#percep">visual 
perception</A> of an <I>image</I> and using <I>lossy compression</I> to reduce 
the <I>file size</I> of the <I>image</I>. This process involves a small but 
irreversible loss of <A href="http://photo.net/learn/jpeg/#qual">quality</A> as 
discussed in the <A href="http://photo.net/learn/jpeg/#errors">errors</A> 
below.</P>
<DIV align=center>
<P><B>Edges in a typical image - zoomed in to see the pixels</B></P>
<P><IMG height=288 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/tm_12-96_edges.jpg" 
width=448><BR>After compression most of the edges are still present, with some 
artifacts</P></DIV>
<P>The actual method of Jpeg/JFIF compression is well described in this <A 
href="http://www.imaging.org/resources/jpegtutorial/index.cfm">tutorial</A> by 
imaging.org.</P>
<P>The main steps are as follows (some require heavy maths)</P>
<UL>
  <LI>Standard colorspace is 256 levels of Red, Green, Blue (16.7 million RGB 
  colors) 
  <LI>Colorspace separation (YCbCr) from RGB<BR>
  <LI>e.g. Y (luminance) = 0.299 * R + 0.587 * G + 0.114 *B 
  <LI>Spatial separation into 8X8 <I>pixels</I> blocks<BR>
  <LI>Sub-sampling (if required) of chroma Cb and Cr (colors) in 16X16 
  <I>pixel</I> blocks 
  <LI>Discrete Cosine Function (DCF) of the spatial frequencies in each 8X8 
  block<BR>
  <LI><B>Quantisation</B> of the spatial frequency matrix<BR>
  <LI><I>Lossless compression</I> of the resulting matrix </LI></UL>
<P>For illustrative purposes large <I>images</I> are not needed, since all of 
the Jpeg compression takes place inside 8X8 (or 16X16) <I>pixel</I> blocks. Note 
that a Jpeg cannot be compressed further using <I>Zip</I> or any other process 
of <I>lossless compression</I>, since this is already done as the last step of 
the Jpeg encoding.</P>
<DIV align=center>
<P><B>Edges in a typical Jpeg image - split by red, green and blue 
channels</B></P>
<P><IMG height=224 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/tm_48_chrom_edges.jpg" 
width=672><BR>Note the predominance of green and blue pixels, with few red 
pixels<BR>The green channel is closest to what the eye sees, with blue having 
next most artifacts</P></DIV>
<P>Decoding an image from a Jpeg is the reverse of this process, and does not 
need elaboration here.</P>
<H2><A name=qual>Jpeg Quality Settings</A></H2>
<P>Typically the only thing that the user can control in Jpeg compression is the 
quality setting (and rarely the <A 
href="http://photo.net/learn/jpeg/#chrom">chroma sub-sampling</A>). The value 
chosen is used in <A href="http://photo.net/learn/jpeg/#encdec">quantisation 
stage</A> above, where less common values are discarded by using tables tuned to 
visual perception. This reduces the amount of information while preserving the 
<A href="http://photo.net/learn/jpeg/#percep">perceived</A> quality. <A 
href="http://photo.net/learn/jpeg/#chrom">Chroma sub-sampling</A> settings are 
dealt with separately (below).</P>
<P>Ranges of quality settings differ in each implementation, but the <A 
href="http://photo.net/learn/jpeg/#ijg">IJG</A> values range from 99 (best) to 1 
(worst). Please note that these are <I>not</I> percentages, nor is there a 
direct correlation with the final <I>file size</I>. The example at the <A 
href="http://photo.net/learn/jpeg/#top">top</A> of the page uses an IJG quality 
setting of 50, and has a file size ratio of roughly 20:1. Anytime you read that 
an image has been compressed with 10:1 Jpeg quality, you should know that this 
is slightly misleading (see <A 
href="http://photo.net/learn/jpeg/#digicam">digital cameras</A> below).</P>
<P>Jpeg is a discrete algorithm, and for a given quality setting different input 
images may give widely differing <I>file sizes</I>. An image with lots of 
texture and fine detail will produce a large Jpeg file, while one consisting 
only of blue sky will be very small. Chosing an appropriate Jpeg quality setting 
is a subjective decision, with no hard rules. I personally use <A 
href="http://photo.net/learn/jpeg/#ijg">IJG</A> quality settings of 75 to 50 
depending on the subject.</P>
<P><B>IJG compression settings comparison - zoomed in</B><BR></P>
<DIV align=center><IMG height=192 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/tm_48by32_IJG_diff.jpg" 
width=864><BR>There is a tradeoff between quality and file size, and smeared 
edges called artifacts </DIV>
<P>The Photoshop scale from 12 to 1 covers the same range, but in differing 
steps. The optimum PS quality settings for web images range from 6 to 3 
depending on subject. See <A 
href="http://photo.net/learn/jpeg/#jpegdmp">Jpegdump</A> below for equivalent 
values and the variation in <A href="http://photo.net/learn/jpeg/#chrom">chroma 
sub-sampling</A>.</P>
<P><B>Photoshop compression settings comparison - zoomed in</B></P>
<DIV align=center><IMG height=192 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/48X32X2_Jpeg_PS.jpg" 
width=864><BR>There is a slightly different tradeoff between quality and file 
size. </DIV>
<P>Picture Window 2.0 used the Pegasus Jpeg Library and has a scale from 100 to 
1. This is totally different from the IJG settings, and typical PW quality 
settings range from 95 to 85 (below that is not useful).</P>
<P><B>Picture Window compression settings comparison - zoomed in</B><BR></P>
<DIV align=center><IMG height=192 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/tm_48by32_PW_diff.jpg" 
width=864><BR>This scale has a different set of tradeoffs between quality and 
file size <A name=chrom></A></DIV>
<H2>Chroma sub-sampling</H2>
<P>Chroma sub-sampling works because human vision is relatively insensitive to 
small areas of colour. It gives a significant reduction in file sizes, with 
little loss of <A href="http://photo.net/learn/jpeg/#percep">perceived</A> 
quality. Some important <A 
href="http://photo.net/learn/jpeg/#errors">exceptions</A> are noted below. The 
default <A href="http://photo.net/learn/jpeg/#ijg">IJG</A> chroma sub-sampling 
is 2:1, which can cause <A 
href="http://photo.net/learn/jpeg/#percep">perceptible</A> <A 
href="http://photo.net/learn/jpeg/#errors">errors</A> in some images. Photo.net 
uses ImageMagick 1:1 chroma sub-sampling in most cases. The default for 
Photoshop varies by version, and also by <A 
href="http://photo.net/learn/jpeg/#qual">quality setting</A>, as indicated by <A 
href="http://photo.net/learn/jpeg/#jpegdmp">Jpegdump</A> below.</P><PRE>IJG Jpeg sizes  Chroma 1   Chroma 2
96X64_75         2,230      2,087 bytes
48X32_75         1,107      1,054
24X16_75           773        753
12X8_75            679        675
</PRE>
<P>For historical reasons the standard 1:1 chroma sampling is sometimes called 
4:4:4 and the lower quality 2:1 sub-sampling is called 4:1:1. The 4:2:2 option 
is an old standard from the television industry which is seldom used. One 
exception seems to be <A href="http://photo.net/learn/jpeg/#digicam">consumer 
digicams</A> which use the 4:2:2 sub-sampling.<BR></P><PRE>  Chroma   4:4:4 4:2:2 4:1:1
48X32_100  2,682 2,253 2,026 bytes
</PRE>
<P align=center><B>IJG compression settings comparison (2:1 chroma)</B><BR></P>
<DIV align=center>
<P><IMG height=192 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/hm_48by32_IJG_diff.jpg" 
width=864><BR>Note how the color edges smear out, these are also artifacts
<P></P></DIV><A name=digicam></A>
<H2>Digital Cameras</H2>
<P>Some characteristics of consumer digital cameras are particularly relevant to 
this article. The current generation have a single CCD (or CMOS) chip with R, G 
&amp; B colour filters arranged in what is called the Bayer pattern. This allows 
interpolation to give an approximation of full-colour for each pixel, from an 
array of 8-bit grey-scale values. (This is quite different from scanners and 
high-end digital cameras which have 3 separate RGB sensors). These 
interpolations create artefacts called fringing on the edges of colour areas 
(analagous to chroma sub-sampling).</P>
<P>A test of <A href="http://photo.net/learn/jpeg/#jpegdmp">Jpegdump</A> on the 
output from a 1.3 mega-pixel digicam gives interesting results. The Jpeg file 
sizes vary with the image content, but for this camera the specifications are as 
follows:<BR>SHQ mode File size 440KB (max) and HQ mode File size 220KB 
(max)<BR>For an 1280x960 pixel image these are equivalent to compression ratios 
of 8:1 and 16:1 respectively. The "super-high-quality" mode gives an <A 
href="http://photo.net/learn/jpeg/#ijg">IJG</A> equivalent <A 
href="http://photo.net/learn/jpeg/#qual">quality setting</A> of about 93, and 
the "medium-quality" mode gives an equivalent of 75-80 for typical scenes. These 
are consistent with suggested settings for use on a website (and give good 
detail in 4X6" prints from the Jpeg).</P>
<P>The Jpeg chroma sub-sampling is the 4:2:2 setting (not the default used in 
IJG or any other package). This may be because the Bayer pattern interpolation 
already introduces a 2:1 horizontal sub-sampling (similar to that in a 
television picture). This gives a small space saving, and using a 1:1 chroma 
sub-sampling would probably be of little benefit. Re-saving these images from a 
digicam as IJG 2:1 chroma sub-sampling introduces a small but detectable 
loss.</P>
<H2><A name=errors>Jpeg Errors</A></H2>
<P>The decoding stage is well implemented, and there are no issues that warrant 
discussion here. Older computers with 16-bit color display are an exception. IE4 
was the only browser that catered to them, by dithering the output 
image.<BR><BR>An existing bug in many browers caused crashes on Jpeg images 
created with the File Save-As option in Photoshop 7.0 (embedding excessive 
amounts of information). The fix was to upgrade to 7.01, or use the Save for Web 
option instead.</P>
<P>By definition every Jpeg contains imaging errors no matter how high the 
quality setting, and should not be used for master-archiving. The main concerns 
relate to subjective <A href="http://photo.net/learn/jpeg/#percep">perceived</A> 
quality, and the <I>file size</I> tradeoffs in the original compression. There 
is no hard-line where errors become perceptible, it is a matter of 
judgement.</P>
<P>The Jpeg compression process introduces more artifacts at lower <A 
href="http://photo.net/learn/jpeg/#qual">quality settings</A>. These become 
particularly visible near <A 
href="http://photo.net/learn/jpeg/#percep">edges</A>, and in areas of solid 
colour where boundaries of 8X8 <I>pixel</I> blocks can show irregularities. Use 
of Jpeg <I>images</I> as input for editing can be problematic, particularly 
since resizing/resampling may move the boundaries of the 8X8 pixel blocks.</P>
<P>Repeated cycles of compression and de-compresison don't normally affect the 
quality, unless the <A href="http://photo.net/learn/jpeg/#qual">quality 
setting</A> is changed between cycles. Once information has been lost it cannot 
be recovered from a Jpeg, except by starting the process from the original 
bitmap. Trying to improve the appearance of a Jpeg image by re-compressing at a 
higher quality setting achieves very little (except an increase in 
file-size).</P>
<DIV align=center>
<P><B>Repeated compression and decompression cycles in steps</B></P>
<P><IMG height=160 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/tm_48by32_IJG_mult_diff.jpg" 
width=480 ?><BR></P></DIV>
<H2>Chroma sub-sampling errors</H2>
<P>Note the edges and artifacts that were never in the original scene 
Significant errors can occur when there is chroma (colour) detail at the 
<I>pixel</I> level, if the <A href="http://photo.net/learn/jpeg/#ijg">IJG</A> 
2:1 default <A href="http://photo.net/learn/jpeg/#chrom">chroma sub-sampling</A> 
is used. This blurs 2X2 blocks of saturated pixels into pale colours (red 
becomes pink). Fortunately this is rare (a tiny fraction of photos are 
affected), but happens even at high quality IJG <A 
href="http://photo.net/learn/jpeg/#qual">quality settings</A>. (PhotoShop <A 
href="http://photo.net/learn/jpeg/#chrom">chroma</A> is different).</P>
<P>
<DIV align=center><IMG height=224 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/hm_chroma12-96X2.jpg" 
width=864><BR>Note how some red and orange pixels become blurred to form pink 
ones </DIV>
<H2><A name=ijg>Independent Jpeg Group</A></H2>
<P>The <A href="http://www.ijg.org/">Independent Jpeg Group</A> developed and 
licenced a free set of <I>utilities</I> for Jpeg compression and de-compression. 
You don't need these directly since they are included in almost every image 
editor and web browser. You may see credits such as: "Portions of this software 
are based in part on the work of the Independent JPEG Group".</P>
<P>Note that Paint Shop Pro uses the IJG utilites, but reverses the scale (in 
PSP 1 is best quality and 99 is worst).<BR><BR><A name=jpegdmp></A></P>
<H2>Jpegdump</H2>
<P>A <I>utility</I> written by Allan Hessenflow (with modifications by Tom Lane) 
allows examination of actual Jpeg data. It has outputs that estimate the <A 
href="http://photo.net/learn/jpeg/#ijg">IJG</A> <A 
href="http://photo.net/learn/jpeg/#qual">quality settings</A> for any given 
Jpeg. When used together with an <A 
href="http://photo.net/learn/jpeg/#ijg">IJG</A> <A 
href="http://photo.net/learn/jpeg/#encdec">compression</A> utility this allows 
<A href="http://photo.net/learn/jpeg/#errors">almost</A> exact recreation of a 
Jpeg. The only versions of this utility that I know of are source code and 
command line executables, so they are unlikely to be of direct use to the 
general public. It would be most useful for Jpeg writing software to list the 
prior quality level so you could rewrite (if necessary) at the same 
level.<BR></P><PRE>JpegDump 96X64_95.JPG
  Approximate quality factor for qtable 0: 95 (scale 9.93, var 1.25)
  Approximate quality factor for qtable 1: 95 (scale 10.18, var 0.26)
  Baseline JPEG  width 96, height 64  components 3
    id 1 horizontal sampling 1, vertical sampling 2, quantization table 0
    id 2 horizontal sampling 1, vertical sampling 1, quantization table 1
    id 3 horizontal sampling 1, vertical sampling 1, quantization table 1
</PRE>
<P>Photoshop Jpeg's do not use the IJG tables, so their equivalent quality can 
only be estimated.<BR></P><PRE>48X32_12: Approximate quality 98 horizontal sampling 1
48X32_11: Approximate quality 94 horizontal sampling 1
48X32_09: Approximate quality 91 horizontal sampling 1
48X32_08: Approximate quality 88 horizontal sampling 1
48X32_07: Approximate quality 83 horizontal sampling 1
48X32_06: Approximate quality 86 horizontal sampling 2
48X32_05: Approximate quality 82 horizontal sampling 2
48X32_04: Approximate quality 77 horizontal sampling 2
48X32_03: Approximate quality 73 horizontal sampling 2
48X32_02: Approximate quality 62 horizontal sampling 2
48X32_01: Approximate quality 52 horizontal sampling 2
</PRE>
<H2>Acknowledgements</H2>
<P>Thanks to <B><A 
href="http://www.photo.net/shared/community-member?user_id=15673">Bill 
Tuthill</A></B> for helpful input and contributions.<BR><BR><A 
name=gloss></A></P>
<H2>Glossary:</H2>
<P><B>Bitmap</B> - the uncompressed <I>image</I>, with <I>file size</I> = H x W 
x 3 (for color)<BR><B>Cumulative</B> - opening and saving the same Jpeg with 
different <I>quality settings</I><BR><B>Diff ^2</B> - the arithmetic difference 
between two <I>bitmaps</I> (squared for emphasis)<BR><B>Dimensions</B> - the 
height and width of an <I>image</I><BR><B>File-Size</B> - either the dimensions 
of an <I>image</I>, or the number of bytes stored or 
transmitted<BR><B>Full-colour</B> - 24 bit (RGB) images with 16.7 million 
colours<BR><B>Image</B> - an array of <I>pixels</I> making up a digital 
picture<BR><B>Lossless Compression</B> - a reversible way of reducing the size 
of data while preserving it<BR><B>Lossy Compression</B> - an irreversible way of 
reducing the size of data by approximating it<BR><B>Multiple</B> - opening and 
closing the same Jpeg several times with the same setting<BR><B>Pixel</B> - 
<B>pi</B>cture <B>el</B>ement or smallest component of a digital 
<I>image</I><BR><B>Utility</B> - a set of source code or complied program 
module<BR><B>Zip</B> - a commonly used lossless compression format<BR><BR><A 
href="http://photo.net/learn/jpeg/#TOP">Back to top</A><BR></P>
<DIV class=endmatter>
<P>(C) Copyright 2003 Gordon Richardson All Rights Reserved </P></DIV></DIV><!-- end of original body -->
<H2>Reader's Comments</H2>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=413391">Will 
Chapman</A><A href="http://photo.net/member-status-icons"> </A>, April 29, 2003; 
06:05 A.M. </DIV>A nice article. But JPEG has had its day! Have a look at: 
<P>http://www.jpeg2000info.com/ 
<P>- higher compression rates and considerably better quality images. Although 
how they are going to persuade everybody to change I don't know. </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=249273">Gloria 
Hopkins</A><A href="http://photo.net/member-status-icons"> </A>, April 29, 2003; 
07:51 A.M. </DIV>Thank you so much for this wonderfully informative article. My 
scanning skills are not the best and your article addressed some issues that 
I've been unclear about for almost three years now : ) 
<P>Thank you! 
<P>Gloria </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=291483">Louis Tsai</A><A 
href="http://photo.net/member-status-icons"> </A>, April 29, 2003; 09:50 A.M. 
</DIV>Interesting and informative reading! Your article has cleared up one or 
two of my uncertainties regarding technicalities in the JPEG compression. 
<P>Thank you. </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=44697">Gordon 
Richardson</A><A href="http://photo.net/member-status-icons"> </A>, April 29, 
2003; 01:24 P.M. </DIV>I intentionally omitted any discussion of Jpeg 2000 in 
this article, because in reality the advantages do not match up to the marketing 
hype, and the number of images and systems using it have not reached the 
critical mass necessary to take it seriously. </DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=404975">Chris 
Losinger</A><A href="http://photo.net/member-status-icons"> </A>, April 29, 
2003; 09:27 P.M. </DIV>JPEG2000 ? 
<P>it's barely supported by the big guys; it has too many features, IMO (which 
makes decoding and even encoding tricky for developers and a hassle for users - 
too many options makes it likely that the options you chosose won't be supported 
in all readers); the results aren't that much better than plain JPG, which is 
supported everywhere, without trouble. J2K is 10 years too late, IMO. the last 
thing the world needs right now is yet another format. 
<P>that said, some of our applications (www.smalleranimals.com) do support J2K, 
but not because any customer has ever asked for it. we only support it because 
it has buzzword value. 
<P>$0.02 
<P>-c </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=332004">Erik 
Magnuson</A><A href="http://photo.net/member-status-icons"> </A>, April 30, 
2003; 07:43 A.M. </DIV>At the compression ratios typically used by digital 
photography, JPEG 2000 offers almost no advantages over JPEG. It's only when 
compressing more than about 20:1 that the differences become significant. Here 
is an interesting discussion of some the the visual differences: <A 
href="http://ai.fri.uni-lj.si/~aleks/jpeg/artifacts.htm">http://ai.fri.uni-lj.si/~aleks/jpeg/artifacts.htm</A> 
</DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=212421">Spencer 
Walker</A><A href="http://photo.net/member-status-icons"> </A>, May 01, 2003; 
02:42 P.M. </DIV>JPEG2000 does support 16-bit per channel images. I don't know 
whether the old JPEG format supports that theoretically, but nobody supports it 
in practice. In contrast, all the JPEG2000 implementations that I have seen 
support 16-bit channels. </DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=212421">Spencer 
Walker</A><A href="http://photo.net/member-status-icons"> </A>, May 01, 2003; 
02:45 P.M. </DIV>JPEG2000 also supports lossless compression in a standard way. 
If JPEG2000 leads to digital cameras that support 16bit, lossless compressed 
images, then that should be a good thing. </DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=44697">Gordon 
Richardson</A><A href="http://photo.net/member-status-icons"> </A>, May 03, 
2003; 09:23 A.M. </DIV>The article on Jpeg2000 by Aleks Jakulin uses the 
notation bits-per-pixel, which is useful when comparing different images. For a 
full-colour (24 bit) image a compression ratio of 20:1 equals 24/20 or 1.2 
bits-per-pixel. 
<P>The Jpeg values given for the digital camera listed above correspond to 1.5 
and 3 bits-per-pixel respectively (24/16 and 24/8). The Exif headers from the 
digicam Jpeg's give approximate bits-per-pixel of 1 and 2 for HQ and SHQ modes 
respectively. 
<P>The number of bits-per-pixel depends on the image content, so this rule 
should not be generalised. For very small images the Jpeg header size makes this 
is not an exact measure. 
<P>For the photo at the top of this article the bitmap size is 200*134*3 or 
80400 bytes, and the Jpeg file-size of 3672 bytes represents 3672*8/26800 or 1.1 
bits-per-pixel. This is near the lower end of the acceptable quality range 
(intentional on my part). 
<P><PRE>IJG compression produces the following values:
Q 25  2,594 bytes = 0.8 bits-per-pixel (30:1 compression ratio)
Q 35  3,278 bytes = 1.0 bits-per-pixel (25:1)
Q 50  4,086 bytes = 1.2 bits-per-pixel (20:1)
Q 65  5,234 bytes = 1.5 bits-per-pixel (15:1)
Q 75  6,393 bytes = 1.9 bits-per-pixel (12:1)
Q 85  8,810 bytes = 2.6 bits-per-pixel (9:1)
Q 95 15,162 bytes = 4.5 bits-per-pixel (5:1)
The IJG Q 95 Jpeg is nearly double the size of the IJG Q 85, with little benfit in perceptible quality.
</PRE>
<P>The color count of an image is another measure of image content, though not 
an exact one (and not useful for B&amp;W which has only 256 shades of grey). 
Editing functions such as resampling and sharpening can have significant effects 
on the pixels in an image, and increase or decrease the final Jpeg size. 
</P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=332004">Erik 
Magnuson</A><A href="http://photo.net/member-status-icons"> </A>, May 04, 2003; 
11:03 A.M. </DIV>
<P>Yes, JPEG 2000 supports 16 bpp. It's debateable how useful this is for a 
lossy compression scheme that does color subsampling. (If your application is 
critical enough to depend on the difference between 8 and 16 bpp, are you really 
going to use a lossy compression scheme at all?) 
<P>Lossless JPEG exists is even used by the Canon 1D &amp; 1Ds for their RAW 
format compression. Even better is <A 
href="http://www.hpl.hp.com/loco/">JPEG-LS</A>. It's standard, runs at about the 
same speed as LZW, and is fairly symmetric (compression and decompression are 
about the same speed.) It offers slightly better compression than PNG (9.54 bit 
per pixel as opposed to 10.38 bpp on one test set). 
<P>Yet, despite the existance of "better" formats, lossy JPEG and lossless TIFF 
(uncompressed or LZW) still dominate for photographic applications. Why? Well, 
they're good enough, fast, and widely supported. Given all of that, merely 
"better" is not enough, partcularly when the alternative is neither fast nor 
widely supported. (Of these, "widely supported" is the most critical factor. Who 
wants to store their photographs in a format that may be difficult to read in 20 
years. <A href="http://www.photo.net/photo/publishing-flashpix">FlashPix</A>, 
anyone?) About the only format type that has become significantly more popular 
in recent years is the digital camera RAW format. Alas, it's not one format but 
dozens and many worry that these formats are not documented and may become 
obsolete. </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=521644">Niels Olson</A><A 
href="http://photo.net/member-status-icons"> <IMG height=14 
alt="Photo.net Patron" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/patron-small.gif" 
width=15 align=middle border=0></A>, May 04, 2003; 04:41 P.M. </DIV>Erik 
Magnuson's observation "...many worry that these formats are not documented and 
may become obsolete..." strikes me as an obvious and solvable problem but which 
requires a significant commitment of time, money and resources to solve. Would 
Adobe or filext.com be the appropriate long-term holder for this information? 
What file type does NASA use? Does IEEE or some other organization already have 
this for action? Does anyone out there have the inside scoop? If so, please 
post. </DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=332004">Erik 
Magnuson</A><A href="http://photo.net/member-status-icons"> </A>, May 04, 2003; 
08:46 P.M. </DIV>AFAIK, there none of these formats has been proposed for 
standardization. The impetus for this would have to come from the camera 
vendors. However all is not lost: <A 
ref="http://www2.primushost.com/~dcoffin/index.html">Dave Coffin</A> has reverse 
engineered many of these formats and made the <A 
href="http://www2.primushost.com/~dcoffin/powershot/dcraw.c">source code</A> 
freely available. Thousands of people have a copy of this code, so it should 
find a home on the internet for a long time to come. Or you can just download a 
copy of the source for yourself and archive it with your photos. Even if you are 
not enough of a computer geek to compile it yourself, I'm sure that finding 
someone else who is geeky enough to compile or translate 'C' code will still be 
possible in 20 years or more. </DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=81128">Joseph 
Albert</A><A href="http://photo.net/member-status-icons"> <IMG height=22 
alt="Photo.net Hero" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/hero-small.gif" 
width=13 align=middle border=0> </A>&nbsp;<A 
href="http://photo.net/member-status-icons"><IMG height=14 
alt="Photo.net Patron" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/patron-small.gif" 
width=15 align=middle border=0></A>, May 08, 2003; 02:24 P.M. </DIV>I couple of 
comments: 
<P><I>At the compression ratios typically used by digital photography, JPEG 2000 
offers almost no advantages over JPEG. </I>
<P>As CCDs and CMOS censors ramp up in resolution, JPEG2000 will become 
increasingly important. Digital imaging software and cameras also will 
increasingly support it. Its day will come. 
<P><I>Note that a Jpeg cannot be compressed further using Zip or any other 
process of lossless compression, since this is already done as the last step of 
the Jpeg encoding. </I>
<P>This is generally the case and correct for practical purposes, but I thought 
I would point out that from a theoretical standpoint, it is not really true. 
Unless the lossless compression done in the last stage of the algorithm produced 
encodings with zero stochastic redundancy between the bits, then it still would 
allow for further compression, although Zip or other compressors one is likely 
to have available likely would not have the ability to squeeze the last bit of 
redundancy out to compress further. </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=44697">Gordon 
Richardson</A><A href="http://photo.net/member-status-icons"> </A>, June 19, 
2003; 01:04 A.M. </DIV>The Jpeg compression in Paint Shop Pro version 8 is based 
on different tables from the IJG ones which were used in all previous versions. 
The usable settings for web purposes range from roughly from 25 to 45, with 
settings of 50 and beyond being of very low quality (lesser range than IJG, and 
no longer 100-Q scale). The tables are much the same as IJG up to setting 25, 
but diverge beyond that point. 
<P>PSP 8 has a large variety of chroma sub-sampling options. Many of these are 
obscure, so avoid using any setting you do not understand. A typical user is 
likely to use 1X1 (no sub-sampling or higher quality), or 2X2 (the standard 
quality default in previous versions). The marginal file-size saving from 4X2 
sub-sampling is not justified by the loss in quality. 
<P><EM>Image Attachment: <A 
href="http://photo.net/general-comments/image-attachment?comment_id=13394553">tm_48by32_PSP8X1_diff.jpg</A></EM></P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=384107">Birkir 
Jónsson</A><A href="http://photo.net/member-status-icons"> <IMG height=14 
alt="Photo.net Patron" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/patron-small.gif" 
width=15 align=middle border=0></A>, September 10, 2003; 05:47 A.M. </DIV>How 
much is lost? 
<P>8 bits per channel is not enough if you plan to do some some fine touch up on 
the image. If you use a software that uses 8 bits per channel it will round the 
results of all your actions (modifycations) to the picture and give you an 
increasingly in acurate result compared to using 16 bits per channel. 
<P>The movie industry has allready noticed this and uses software like film gimp 
and others that use 16 bit per channel for this very reason. 
<P>I for one would very much like to get as much information from image as I can 
so postprocessing will be more acurate. </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<CENTER><IMG height=96 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/PSP8_reps_48X32X2.jpg" 
width=312> <BR><SPAN class=caption>PSP 8 Jpeg repeated saving</SPAN> </CENTER>
<P>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=44697">Gordon 
Richardson</A><A href="http://photo.net/member-status-icons"> </A>, November 17, 
2003; 11:49 P.M. </DIV>Although repeated compression and decompression of Jpeg's 
is NOT recommended, the IJG library produces mininmal degradation if the same 
quality setting is used. 
<P>I came across a thread on Jasc User Forums (http://forums.jasc.com/) which 
indicates that PSP 8 has a bug when repeatedly saving and re-opening the same 
Jpeg. Paint Shop Pro 8 uses a new Jpeg library with different settings from IJG. 
After 10 saves the artefacts are quite noticeable (in areas of sky). </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=22186">Mike Morgan</A><A 
href="http://photo.net/member-status-icons"> </A>, January 10, 2004; 05:11 P.M. 
</DIV>Just thought I'd add this diagram to illustrate how DCTs are organized for 
one JPEG implementation. Note for these purposes, YUV is same or similar to 
YCrCb. 
<P><EM>Image Attachment: <A 
href="http://photo.net/general-comments/image-attachment?comment_id=13443972">mcu_dct.gif</A></EM></P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<CENTER><IMG height=224 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/haem_recompress.jpg" 
width=384> <BR><SPAN class=caption></SPAN></CENTER>
<P>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=44697">Gordon 
Richardson</A><A href="http://photo.net/member-status-icons"> </A>, March 07, 
2004; 12:43 A.M. </DIV>The combination of editing and Jpeg recompression 
produces some additional artefacts, and a useful test (in a reversible way) was 
suggested by John P Sheehy. Shifting an image 1 pixel down and to the right 
disrupts the 8X8 blocks in Jpeg quantisation, and forces recompression, with 
cumulative artefacts and errors. 
<P>In this example the colour saturation is significantly reduced with only a 
few iterations, and the result is a seriously degraded image. I assume that this 
situation is not common, but does indicate that editing combined with Jpeg 
compression is undesirable. </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<CENTER><IMG height=224 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/48X32X2_PS_recompress.jpg" 
width=384> <BR><SPAN class=caption></SPAN></CENTER>
<P>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=44697">Gordon 
Richardson</A><A href="http://photo.net/member-status-icons"> </A>, March 08, 
2004; 12:26 P.M. </DIV>The question of Jpeg recompression comes up frequently on 
photo.net. This example simulates what occurs when an image compressed with 
Photoshop (V5.5) is submitted to photo.net, which then uses IJG 75 (chroma 1X1) 
to recompress the image (if certain size limits are exceeded). 
<P>The combination of medium-low quality Photoshop compression (PS Q6) with 
photo.net recompression produces slightly worse results, since Jpeg artefacts 
are cumulative. If the uploaded image uses reasonably high quality compression 
(PS Q8-12), slightly better results are produced. (This is contrary to previous 
comments with suggested the opposite). 
<P>Chroma subsampling is also important, but has become less of an issue since 
photo.net changed to 1X1 subsampling (more than 2 years ago). </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=936717">Alexandre 
Silva</A><A href="http://photo.net/member-status-icons"> </A>, March 13, 2004; 
01:41 P.M. </DIV>In my website, about clouds classification, I inserted photos 
with resolution 125 dpi and quality factor 15 in a scale of 2 to 255. It is 
manipulated in the Corel PhotoPaint program, version 5.0. I utilise the option 
"4:4:4". Which means sub-sampling chroma? </DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=15673">Bill Tuthill</A><A 
href="http://photo.net/member-status-icons"> <IMG height=22 alt="Photo.net Hero" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/hero-small.gif" 
width=13 align=middle border=0> </A>&nbsp;<A 
href="http://photo.net/member-status-icons"><IMG height=14 
alt="Photo.net Patron" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/patron-small.gif" 
width=15 align=middle border=0></A>, September 22, 2005; 02:25 P.M. 
</DIV>Subsampling 4:4:4 can also be called 1:1:1 according to the <A 
href="http://en.wikipedia.org/wiki/YUV_4:2:2">Wikipedia article</A>. 
<P>Despite what Gordon wrote about 4:2:2 being seldom used, I recently noticed 
that Canon digicams often produce JPEG in that form. </P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=1804552">rod col</A><A 
href="http://photo.net/member-status-icons"> </A>, October 26, 2005; 10:58 A.M. 
</DIV>
<P><A href="http://www.optimizehosting.com/"><B>compress a jpg file</B> with 
optimizehosting webcompression tool</A></P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=15673">Bill Tuthill</A><A 
href="http://photo.net/member-status-icons"> <IMG height=22 alt="Photo.net Hero" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/hero-small.gif" 
width=13 align=middle border=0> </A>&nbsp;<A 
href="http://photo.net/member-status-icons"><IMG height=14 
alt="Photo.net Patron" 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/patron-small.gif" 
width=15 align=middle border=0></A>, February 02, 2006; 01:42 P.M. </DIV>Also, 
someone on comp.compression pointed out that under Chroma Subsampling, both 
instances of 4:1:1 should actually be 4:2:0. </DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=2150266">Thom Sharp</A><A 
href="http://photo.net/member-status-icons"> </A>, May 14, 2006; 01:57 A.M. 
</DIV>Bill is correct about the 4:1:1 vs. 4:2:0 issue. 
<P>Within the professional cinematography, video, and imaging industries, chroma 
subsampling is expressed using the Y:Cr:Cb notation. This notation was 
originally devised to convey the horizontal (not vertical) resolution ratios of 
the Cr (red) and Cb (blue) channels to the horizontal resolution of Y 
(luminance). 4:4:4, therefore, indicates the absence of horizontal subsampling 
(1:1), while the 4:2:2 and 4:1:1 formats indicate that the Cr and Cb channels 
each horizontally boast 50% (4:2:2), and 25% (4:1:1), of Y's horizontal 
resolution. 
<P>While less common, a 4:2:1 format also exists, yielding 2:1 horizontal Cr 
resolution vs. Y, and 4:1 horizontal Cb resolution vs. Y. This exploits the 
lower sensitivity to blue than red definition in human vision. 
<P>Unfortunately, the Y:Cr:Cb notation often causes confusion because it was 
"hacked" after its introduction to express vertical subsampling levels in 
addition to horizontal ones. For example, while 4:2:0 seems to suggest 2:1 Cr 
vs. Y horizontally and the total lack of Cb, it actually indicates that both Cr 
and Cb are present, and that each is subsampled 2:1 vs. Y horizontally *and* 
vertically. The reason this "makes sense" is because, in vertical subsampling, 
only one of the two chroma subchannels is sampled per horizontal line 
(co-siting). Therefore, scanline 1 contains only Cr at 50% of Y's horizontal 
resolution (4:2:0), while scanline 2 contains only Cb at 50% of Y's horizontal 
resolution (4:0:2), etc. Upon decoding, Cr and Cb are vertically interpolated to 
form a vertical average. But in encoded form, it's literally "4:2:0". 
<P>The 4:1:0 format uses the same technique, whereby Cr and Cb are alternately 
present (2:1 averaged vertical chroma resolution), and each boasts 25% (4:1) of 
the horizontal resolution of Y. 
<P>Summary: 
<P>4:4:4 (PSP 1x1 1x1 1x1) - CrH 100% - CbH 100% - CrV 100% - CbV 100% 
<P>4:2:2 (PSP 2x1 1x1 1x1) - CrH 50% - CbH 50% - CrV 100% - CbV 100% 
<P>4:1:1 (PSP 4x1 1x1 1x1) - CrH 25% - CbH 25% - CrV 100% - CbV 100% 
<P>4:2:0 (PSP 2x2 1x1 1x1) - CrH 50% - CbH 50% - CrV 50% - CbV 50% 
<P>4:1:0 (PSP 4x2 1x1 1x1) - CrH 25% - CbH 25% - CrV 50% - CbV 50% 
<P>Common uses: 
<P>4:4:4 - High-end imaging/cinematography processing, high quality JPEG (used 
by Photoshop's higher quality levels) 
<P>4:2:2 - D-1, D-5, D-9 (a.k.a. Digital-S), Ampex DCT, Digital Betacam, Betacam 
SX, DVCPRO-50, studio/high profile MPEG-2, good quality JPEG 
<P>4:2:0 - PAL DV, PAL DVCAM, main profile MPEG-2 (e.g. DVD, American SDTV and 
HDTV, SD and HD DVB), average quality JPEG (used by Photoshop's lower quality 
levels) 
<P>4:1:1 - D-7, NTSC DV, NTSC DVCAM, DVCPRO, low quality JPEG 
<P>4:1:0 - Some low-bandwidth video/image codecs (worse than VHS chroma) 
</P></DIV>
<DIV class=sep>——</DIV>
<DIV>
<H3></H3>
<DIV class=byline><A 
href="http://photo.net/shared/community-member?user_id=389411">Calvin Hass</A><A 
href="http://photo.net/member-status-icons"> </A>, September 08, 2006; 12:20 
P.M. </DIV>As I haven't found any Windows-based utilities (besides old 
command-line variants) that do the full JPEG decoding and reporting of the JFIF 
markers (<STRONG>quantization tables</STRONG>, <STRONG>compression 
settings/quality</STRONG>, <STRONG>chroma subsampling</STRONG>, etc.), I wrote 
my own simple tool:<BR><BR><A 
href="http://www.impulseadventure.com/photo/jpeg-snoop.html">JPEGsnoop</A><BR><BR>Hope 
this helps!<BR>Calvin Hass </DIV><BR>
<CENTER><A href="http://photo.net/comments/add?page_id=12361">Add a 
comment</A></CENTER></DIV><!-- content -->
<DIV id=footer><A href="http://philip.greenspun.com/dogs/george"><IMG height=67 
src="Photo_net - Jpeg Compression by Gordon Richardson_files/george-alone.jpg" 
width=66 align=right border=0></A> © 2000-2006 Luminal Path Corporation and 
contributors. Contributed content used with permission. <BR><A 
href="http://photo.net/about-us">About Us</A> | <A 
href="http://photo.net/frequent-questions">Photo.net FAQ</A> | <A 
href="http://photo.net/photonet-subscriptions?src=foot">Subscribe!</A> | <A 
href="http://photo.net/contact-us">Contact Us</A> | <A 
href="http://photo.net/terms-of-use">Terms of Use</A> | <A 
href="http://photo.net/privacy-policy">Privacy</A> <BR>
<DIV style="CLEAR: both"></DIV>
<SCRIPT src="Photo_net - Jpeg Compression by Gordon Richardson_files/urchin.js" 
type=text/javascript></SCRIPT>

<SCRIPT type=text/javascript>_uacct = "UA-73898-1";urchinTracker();</SCRIPT>
</DIV>
<SCRIPT language=javascript type=text/javascript>
    sfHover = function() {
     var tabs=document.getElementById("tabs").getElementsByTagName("li");
     for (var t=0; t < tabs.length; t++) {
       tabs[t].onmouseover = function() {this.className += " sfhover";}
       tabs[t].onmouseout = function() {this.className = this.className.replace(new RegExp(" sfhover\\b"),"");}
     }
    }
    if (window.attachEvent) window.attachEvent("onload",sfHover);       
    </SCRIPT>
</BODY></HTML>
